{
  "id": "16d73652-2a19-46e6-80b2-d00e72032175",
  "prevId": "b5cbf966-afeb-4a9c-8ac5-e3c3edfb391b",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.album": {
      "name": "album",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "album_id": {
          "name": "album_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "release_date": {
          "name": "release_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "total_tracks": {
          "name": "total_tracks",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "album_cover": {
          "name": "album_cover",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "popularity": {
          "name": "popularity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "album_type": {
          "name": "album_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "album_tracks": {
          "name": "album_tracks",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "album_album_id_unique": {
          "name": "album_album_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "album_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.albums_artists": {
      "name": "albums_artists",
      "schema": "",
      "columns": {
        "album_id": {
          "name": "album_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "artist_id": {
          "name": "artist_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "albums_artists_album_id_album_album_id_fk": {
          "name": "albums_artists_album_id_album_album_id_fk",
          "tableFrom": "albums_artists",
          "tableTo": "album",
          "columnsFrom": [
            "album_id"
          ],
          "columnsTo": [
            "album_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "albums_artists_artist_id_artists_artist_id_fk": {
          "name": "albums_artists_artist_id_artists_artist_id_fk",
          "tableFrom": "albums_artists",
          "tableTo": "artists",
          "columnsFrom": [
            "artist_id"
          ],
          "columnsTo": [
            "artist_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.api_keys": {
      "name": "api_keys",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "secret_hash": {
          "name": "secret_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "lastUsedAt": {
          "name": "lastUsedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "unique_api_key_secret_hash": {
          "name": "unique_api_key_secret_hash",
          "columns": [
            {
              "expression": "secret_hash",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "api_keys_user_id_user_id_fk": {
          "name": "api_keys_user_id_user_id_fk",
          "tableFrom": "api_keys",
          "tableTo": "user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.artists": {
      "name": "artists",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "artist_id": {
          "name": "artist_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "genres": {
          "name": "genres",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'"
        },
        "image_url": {
          "name": "image_url",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "popularity": {
          "name": "popularity",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "follower_amount": {
          "name": "follower_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "artists_artist_id_unique": {
          "name": "artists_artist_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "artist_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.artists_stats": {
      "name": "artists_stats",
      "schema": "",
      "columns": {
        "artist_id": {
          "name": "artist_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "top_tracks": {
          "name": "top_tracks",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "top_albums": {
          "name": "top_albums",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "last_updated": {
          "name": "last_updated",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "artists_stats_artist_id_artists_artist_id_fk": {
          "name": "artists_stats_artist_id_artists_artist_id_fk",
          "tableFrom": "artists_stats",
          "tableTo": "artists",
          "columnsFrom": [
            "artist_id"
          ],
          "columnsTo": [
            "artist_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.audio_features": {
      "name": "audio_features",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "spotify_id": {
          "name": "spotify_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "mid": {
          "name": "mid",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "feature_data": {
          "name": "feature_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "available": {
          "name": "available",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "last_updated": {
          "name": "last_updated",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "unavailable_reason": {
          "name": "unavailable_reason",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "lookup_attempts": {
          "name": "lookup_attempts",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "next_lookup_attempt": {
          "name": "next_lookup_attempt",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "audio_features_spotify_id_index": {
          "name": "audio_features_spotify_id_index",
          "columns": [
            {
              "expression": "spotify_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "audio_features_mid_index": {
          "name": "audio_features_mid_index",
          "columns": [
            {
              "expression": "mid",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "audio_features_available_index": {
          "name": "audio_features_available_index",
          "columns": [
            {
              "expression": "available",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "audio_features_spotify_id_tracks_track_id_fk": {
          "name": "audio_features_spotify_id_tracks_track_id_fk",
          "tableFrom": "audio_features",
          "tableTo": "tracks",
          "columnsFrom": [
            "spotify_id"
          ],
          "columnsTo": [
            "track_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "audio_features_spotify_id_unique": {
          "name": "audio_features_spotify_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "spotify_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.integrations": {
      "name": "integrations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "platform_name": {
          "name": "platform_name",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "platform_user_id": {
          "name": "platform_user_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "platform_username": {
          "name": "platform_username",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "profile_url": {
          "name": "profile_url",
          "type": "varchar(512)",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "varchar(512)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "enabled": {
          "name": "enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "unique_user_platform": {
          "name": "unique_user_platform",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "platform_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "integrations_user_id_user_id_fk": {
          "name": "integrations_user_id_user_id_fk",
          "tableFrom": "integrations",
          "tableTo": "user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.milestone_thresholds": {
      "name": "milestone_thresholds",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "entityType": {
          "name": "entityType",
          "type": "entity_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "milestoneType": {
          "name": "milestoneType",
          "type": "milestone_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "threshold_value": {
          "name": "threshold_value",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.related_artists": {
      "name": "related_artists",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "artist_id": {
          "name": "artist_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "related_artist_id": {
          "name": "related_artist_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "match_score": {
          "name": "match_score",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "source": {
          "name": "source",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'lastfm'"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "related_artists_artist_id_artists_id_fk": {
          "name": "related_artists_artist_id_artists_id_fk",
          "tableFrom": "related_artists",
          "tableTo": "artists",
          "columnsFrom": [
            "artist_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "related_artists_related_artist_id_artists_id_fk": {
          "name": "related_artists_related_artist_id_artists_id_fk",
          "tableFrom": "related_artists",
          "tableTo": "artists",
          "columnsFrom": [
            "related_artist_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_artist_relationship": {
          "name": "unique_artist_relationship",
          "nullsNotDistinct": false,
          "columns": [
            "artist_id",
            "related_artist_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.sessions": {
      "name": "sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "sessions_user_id_user_id_fk": {
          "name": "sessions_user_id_user_id_fk",
          "tableFrom": "sessions",
          "tableTo": "user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.spotify_to_mbid_map": {
      "name": "spotify_to_mbid_map",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "trackId": {
          "name": "trackId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "mbid": {
          "name": "mbid",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "isrc": {
          "name": "isrc",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "last_updated": {
          "name": "last_updated",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "spotify_to_mbid_map_trackId_unique": {
          "name": "spotify_to_mbid_map_trackId_unique",
          "nullsNotDistinct": false,
          "columns": [
            "trackId"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.sync_plays": {
      "name": "sync_plays",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "track_id": {
          "name": "track_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "track_name": {
          "name": "track_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "artist_id": {
          "name": "artist_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "artist": {
          "name": "artist",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "played_at": {
          "name": "played_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "duration_ms": {
          "name": "duration_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "album_id": {
          "name": "album_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "album_name": {
          "name": "album_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "synced_at": {
          "name": "synced_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "sync_plays_user_id_user_id_fk": {
          "name": "sync_plays_user_id_user_id_fk",
          "tableFrom": "sync_plays",
          "tableTo": "user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.tokens": {
      "name": "tokens",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "access_token": {
          "name": "access_token",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "token_iv": {
          "name": "token_iv",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "access_token_tag": {
          "name": "access_token_tag",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "refresh_token": {
          "name": "refresh_token",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "refresh_token_iv": {
          "name": "refresh_token_iv",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "refresh_token_tag": {
          "name": "refresh_token_tag",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "last_refreshed": {
          "name": "last_refreshed",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "tokens_user_id_user_id_fk": {
          "name": "tokens_user_id_user_id_fk",
          "tableFrom": "tokens",
          "tableTo": "user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.track_artists": {
      "name": "track_artists",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "track_id": {
          "name": "track_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "artist_id": {
          "name": "artist_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "artist_name": {
          "name": "artist_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "order": {
          "name": "order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "track_artists_track_id_index": {
          "name": "track_artists_track_id_index",
          "columns": [
            {
              "expression": "track_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "track_artists_artist_id_index": {
          "name": "track_artists_artist_id_index",
          "columns": [
            {
              "expression": "artist_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "track_artists_track_id_tracks_track_id_fk": {
          "name": "track_artists_track_id_tracks_track_id_fk",
          "tableFrom": "track_artists",
          "tableTo": "tracks",
          "columnsFrom": [
            "track_id"
          ],
          "columnsTo": [
            "track_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_track_artist": {
          "name": "unique_track_artist",
          "nullsNotDistinct": false,
          "columns": [
            "track_id",
            "artist_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.tracks": {
      "name": "tracks",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "track_id": {
          "name": "track_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "album": {
          "name": "album",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "albumId": {
          "name": "albumId",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "artist": {
          "name": "artist",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "isrc": {
          "name": "isrc",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "image_url": {
          "name": "image_url",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "popularity": {
          "name": "popularity",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "duration": {
          "name": "duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "tracks_track_id_unique": {
          "name": "tracks_track_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "track_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_exports": {
      "name": "user_exports",
      "schema": "",
      "columns": {
        "export_id": {
          "name": "export_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "upload_date": {
          "name": "upload_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "file_name": {
          "name": "file_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "upload_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'queued'"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "user_exports_user_id_user_id_fk": {
          "name": "user_exports_user_id_user_id_fk",
          "tableFrom": "user_exports",
          "tableTo": "user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_listening_history": {
      "name": "user_listening_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "total_ms": {
          "name": "total_ms",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "time_message": {
          "name": "time_message",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "unique_artists": {
          "name": "unique_artists",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "unique_tracks": {
          "name": "unique_tracks",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "listening_hours": {
          "name": "listening_hours",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "listening_minutes": {
          "name": "listening_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "peak_hour": {
          "name": "peak_hour",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "total_tracks": {
          "name": "total_tracks",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "times_of_day": {
          "name": "times_of_day",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "heatmap_data": {
          "name": "heatmap_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "weekday_analysis": {
          "name": "weekday_analysis",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "longest_session": {
          "name": "longest_session",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "traveler_message": {
          "name": "traveler_message",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "user_listening_history_user_id_user_id_fk": {
          "name": "user_listening_history_user_id_user_id_fk",
          "tableFrom": "user_listening_history",
          "tableTo": "user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_milestones": {
      "name": "user_milestones",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "entityType": {
          "name": "entityType",
          "type": "entity_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "milestoneType": {
          "name": "milestoneType",
          "type": "milestone_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "milestone_value": {
          "name": "milestone_value",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "milestone_name": {
          "name": "milestone_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reached_at": {
          "name": "reached_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "user_milestones_user_id_user_id_fk": {
          "name": "user_milestones_user_id_user_id_fk",
          "tableFrom": "user_milestones",
          "tableTo": "user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_top_artists": {
      "name": "user_top_artists",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "history_id": {
          "name": "history_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "artist_id": {
          "name": "artist_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "rank": {
          "name": "rank",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "user_top_artists_user_id_user_id_fk": {
          "name": "user_top_artists_user_id_user_id_fk",
          "tableFrom": "user_top_artists",
          "tableTo": "user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_top_artists_history_id_user_listening_history_id_fk": {
          "name": "user_top_artists_history_id_user_listening_history_id_fk",
          "tableFrom": "user_top_artists",
          "tableTo": "user_listening_history",
          "columnsFrom": [
            "history_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_top_artists_artist_id_artists_artist_id_fk": {
          "name": "user_top_artists_artist_id_artists_artist_id_fk",
          "tableFrom": "user_top_artists",
          "tableTo": "artists",
          "columnsFrom": [
            "artist_id"
          ],
          "columnsTo": [
            "artist_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_top_tracks": {
      "name": "user_top_tracks",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "history_id": {
          "name": "history_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "track_id": {
          "name": "track_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "rank": {
          "name": "rank",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "user_top_tracks_user_id_user_id_fk": {
          "name": "user_top_tracks_user_id_user_id_fk",
          "tableFrom": "user_top_tracks",
          "tableTo": "user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_top_tracks_history_id_user_listening_history_id_fk": {
          "name": "user_top_tracks_history_id_user_listening_history_id_fk",
          "tableFrom": "user_top_tracks",
          "tableTo": "user_listening_history",
          "columnsFrom": [
            "history_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_top_tracks_track_id_tracks_track_id_fk": {
          "name": "user_top_tracks_track_id_tracks_track_id_fk",
          "tableFrom": "user_top_tracks",
          "tableTo": "tracks",
          "columnsFrom": [
            "track_id"
          ],
          "columnsTo": [
            "track_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user": {
      "name": "user",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "spotify_id": {
          "name": "spotify_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "username": {
          "name": "username",
          "type": "varchar(30)",
          "primaryKey": false,
          "notNull": true
        },
        "bio": {
          "name": "bio",
          "type": "varchar(150)",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "image": {
          "name": "image",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "flags": {
          "name": "flags",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true
        },
        "sync_enabled": {
          "name": "sync_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "sync_id": {
          "name": "sync_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "last_synced_at": {
          "name": "last_synced_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_spotify_id_unique": {
          "name": "user_spotify_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "spotify_id"
          ]
        },
        "user_slug_unique": {
          "name": "user_slug_unique",
          "nullsNotDistinct": false,
          "columns": [
            "slug"
          ]
        },
        "user_email_unique": {
          "name": "user_email_unique",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.webhook_logs": {
      "name": "webhook_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "webhook_id": {
          "name": "webhook_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "status_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "response_data": {
          "name": "response_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "request_data": {
          "name": "request_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "webhook_logs_webhook_id_webhooks_id_fk": {
          "name": "webhook_logs_webhook_id_webhooks_id_fk",
          "tableFrom": "webhook_logs",
          "tableTo": "webhooks",
          "columnsFrom": [
            "webhook_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.webhooks": {
      "name": "webhooks",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "webhook_secret": {
          "name": "webhook_secret",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "webhooks_user_id_user_id_fk": {
          "name": "webhooks_user_id_user_id_fk",
          "tableFrom": "webhooks",
          "tableTo": "user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.status_enum": {
      "name": "status_enum",
      "schema": "public",
      "values": [
        "success",
        "failed"
      ]
    },
    "public.upload_status": {
      "name": "upload_status",
      "schema": "public",
      "values": [
        "queued",
        "processing",
        "completed"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}